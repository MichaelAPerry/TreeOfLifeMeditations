<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Fool's Journey - Tree of Life</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f0f0f0;
            background-image: linear-gradient(to bottom, #e6e6fa, #9370db);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            color: #4b0082;
        }

        header h1 {
            margin-bottom: 10px;
        }

        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        @media (min-width: 768px) {
            main {
                flex-direction: row;
                align-items: flex-start;
            }
        }

        .tree-container {
            position: relative;
            max-width: 100%;
            height: auto;
        }

        #tree-of-life {
            max-width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .display-panel {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            flex: 1;
            min-width: 300px;
        }

        .tarot-display {
            text-align: center;
            margin-bottom: 20px;
        }

        #tarot-title {
            color: #4b0082;
            margin-bottom: 15px;
        }

        .tarot-image-container {
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            height: 450px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f8f8;
            border-radius: 8px;
            overflow: hidden;
        }

        #tarot-image {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }

        .audio-player {
            margin: 20px 0;
            text-align: center;
        }

        #meditation-audio {
            width: 100%;
        }

        .path-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f8f8;
            border-radius: 8px;
            border-left: 4px solid #4b0082;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #4b0082;
        }

        /* Path buttons styling */
        .path-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            margin: 20px 0;
            width: 100%;
        }

        .path-button {
            background-color: #4b0082;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .path-button:hover {
            background-color: #9370db;
            transform: scale(1.05);
        }

        .path-button.active {
            background-color: #ff9900;
            box-shadow: 0 0 10px rgba(255, 153, 0, 0.5);
        }

        /* Navigation controls */
        .navigation-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .nav-button {
            background-color: #4b0082;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background-color: #9370db;
        }

        /* Path legend */
        .path-legend {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f8f8;
            border-radius: 8px;
            border-left: 4px solid #4b0082;
        }

        .path-legend h3 {
            color: #4b0082;
            margin-bottom: 10px;
        }

        .path-legend-item {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>The Fool's Journey - Tree of Life Meditations</h1>
            <p>Select a path number to view the tarot trump and play the meditation</p>
        </header>
        
        <main>
            <div class="tree-container">
                <img src="images/Tree_of_life1.jpg" alt="Tree of Life" id="tree-of-life">
                
                <!-- Path buttons -->
                <div class="path-buttons">
                    <button class="path-button" data-path="0" data-trump="The Fool">0</button>
                    <button class="path-button" data-path="1" data-trump="The Magician">1</button>
                    <button class="path-button" data-path="2" data-trump="The High Priestess">2</button>
                    <button class="path-button" data-path="3" data-trump="The Empress">3</button>
                    <button class="path-button" data-path="4" data-trump="The Emperor">4</button>
                    <button class="path-button" data-path="5" data-trump="The Hierophant">5</button>
                    <button class="path-button" data-path="6" data-trump="The Lovers">6</button>
                    <button class="path-button" data-path="7" data-trump="The Chariot">7</button>
                    <button class="path-button" data-path="8" data-trump="Strength">8</button>
                    <button class="path-button" data-path="9" data-trump="The Hermit">9</button>
                    <button class="path-button" data-path="10" data-trump="Wheel of Fortune">10</button>
                    <button class="path-button" data-path="11" data-trump="Justice">11</button>
                    <button class="path-button" data-path="12" data-trump="The Hanged Man">12</button>
                    <button class="path-button" data-path="13" data-trump="Death">13</button>
                    <button class="path-button" data-path="14" data-trump="Temperance">14</button>
                    <button class="path-button" data-path="15" data-trump="The Devil">15</button>
                    <button class="path-button" data-path="16" data-trump="The Tower">16</button>
                    <button class="path-button" data-path="17" data-trump="The Star">17</button>
                    <button class="path-button" data-path="18" data-trump="The Moon">18</button>
                    <button class="path-button" data-path="19" data-trump="The Sun">19</button>
                    <button class="path-button" data-path="20" data-trump="Judgement">20</button>
                    <button class="path-button" data-path="21" data-trump="The World">21</button>
                </div>
                
                <!-- Navigation controls -->
                <div class="navigation-controls">
                    <button class="nav-button" id="prev-button">Previous Path</button>
                    <button class="nav-button" id="next-button">Next Path</button>
                </div>
                
                <!-- Path legend -->
                <div class="path-legend">
                    <h3>Path Reference</h3>
                    <div class="path-legend-item"><strong>0: The Fool</strong> - Crown to Wisdom</div>
                    <div class="path-legend-item"><strong>1: The Magician</strong> - Crown to Understanding</div>
                    <div class="path-legend-item"><strong>2: The High Priestess</strong> - Crown to Knowledge</div>
                    <div class="path-legend-item"><strong>3: The Empress</strong> - Wisdom to Understanding</div>
                    <div class="path-legend-item"><strong>4: The Emperor</strong> - Wisdom to Mercy</div>
                    <div class="path-legend-item"><strong>5: The Hierophant</strong> - Wisdom to Knowledge</div>
                    <div class="path-legend-item"><strong>6: The Lovers</strong> - Understanding to Knowledge</div>
                    <div class="path-legend-item"><strong>7: The Chariot</strong> - Understanding to Judgement</div>
                    <div class="path-legend-item"><strong>8: Strength</strong> - Mercy to Judgement</div>
                    <div class="path-legend-item"><strong>9: The Hermit</strong> - Mercy to Beauty</div>
                    <div class="path-legend-item"><strong>10: Wheel of Fortune</strong> - Mercy to Knowledge</div>
                    <div class="path-legend-item"><strong>11: Justice</strong> - Knowledge to Beauty</div>
                    <div class="path-legend-item"><strong>12: The Hanged Man</strong> - Judgement to Beauty</div>
                    <div class="path-legend-item"><strong>13: Death</strong> - Beauty to Eternity</div>
                    <div class="path-legend-item"><strong>14: Temperance</strong> - Beauty to Foundation</div>
                    <div class="path-legend-item"><strong>15: The Devil</strong> - Beauty to Reverberation</div>
                    <div class="path-legend-item"><strong>16: The Tower</strong> - Judgement to Reverberation</div>
                    <div class="path-legend-item"><strong>17: The Star</strong> - Foundation to Eternity</div>
                    <div class="path-legend-item"><strong>18: The Moon</strong> - Foundation to Reverberation</div>
                    <div class="path-legend-item"><strong>19: The Sun</strong> - Reverberation to Kingdom</div>
                    <div class="path-legend-item"><strong>20: Judgement</strong> - Foundation to Kingdom</div>
                    <div class="path-legend-item"><strong>21: The World</strong> - Eternity to Kingdom</div>
                </div>
            </div>
            
            <div class="display-panel">
                <div class="tarot-display">
                    <h2 id="tarot-title">Select a path number</h2>
                    <div class="tarot-image-container">
                        <img id="tarot-image" src="" alt="Tarot Trump">
                    </div>
                </div>
                
                <div class="audio-player">
                    <audio id="meditation-audio" controls>
                        <source src="" type="audio/wav">
                        Your browser does not support the audio element.
                    </audio>
                </div>
                
                <div class="path-info">
                    <p id="path-description"></p>
                </div>
            </div>
        </main>
        
        <footer>
            <p>The Fool's Journey - Tree of Life Meditations by Stephan Hoeller</p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Cache DOM elements
            const tarotTitle = document.getElementById('tarot-title');
            const tarotImage = document.getElementById('tarot-image');
            const meditationAudio = document.getElementById('meditation-audio');
            const pathDescription = document.getElementById('path-description');
            const pathButtons = document.querySelectorAll('.path-button');
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            
            // Path descriptions
            const pathDescriptions = {
                0: "Path 0: The Fool - Connects Crown (Kether) to Wisdom (Chokmah). This path represents the beginning of the spiritual journey, innocence, and spontaneity.",
                1: "Path 1: The Magician - Connects Crown (Kether) to Understanding (Binah). This path represents conscious awareness, skill, and the power to manifest.",
                2: "Path 2: The High Priestess - Connects Crown (Kether) to Knowledge (Da'at). This path represents intuition, mystery, and the subconscious mind.",
                3: "Path 3: The Empress - Connects Wisdom (Chokmah) to Understanding (Binah). This path represents fertility, nurturing, and abundance.",
                4: "Path 4: The Emperor - Connects Wisdom (Chokmah) to Mercy (Chesed). This path represents authority, structure, and stability.",
                5: "Path 5: The Hierophant - Connects Wisdom (Chokmah) to Knowledge (Da'at). This path represents tradition, education, and spiritual guidance.",
                6: "Path 6: The Lovers - Connects Understanding (Binah) to Knowledge (Da'at). This path represents relationships, choices, and harmony.",
                7: "Path 7: The Chariot - Connects Understanding (Binah) to Judgement (Geburah). This path represents determination, control, and victory.",
                8: "Path 8: Strength - Connects Mercy (Chesed) to Judgement (Geburah). This path represents courage, patience, and compassion.",
                9: "Path 9: The Hermit - Connects Mercy (Chesed) to Beauty (Tiphareth). This path represents introspection, solitude, and inner guidance.",
                10: "Path 10: Wheel of Fortune - Connects Mercy (Chesed) to Knowledge (Da'at). This path represents cycles, destiny, and change.",
                11: "Path 11: Justice - Connects Knowledge (Da'at) to Beauty (Tiphareth). This path represents fairness, truth, and karma.",
                12: "Path 12: The Hanged Man - Connects Judgement (Geburah) to Beauty (Tiphareth). This path represents surrender, new perspective, and sacrifice.",
                13: "Path 13: Death - Connects Beauty (Tiphareth) to Eternity (Netzach). This path represents transformation, endings, and new beginnings.",
                14: "Path 14: Temperance - Connects Beauty (Tiphareth) to Foundation (Yesod). This path represents balance, moderation, and harmony.",
                15: "Path 15: The Devil - Connects Beauty (Tiphareth) to Reverberation (Hod). This path represents bondage, materialism, and hidden depths.",
                16: "Path 16: The Tower - Connects Judgement (Geburah) to Reverberation (Hod). This path represents sudden change, revelation, and awakening.",
                17: "Path 17: The Star - Connects Foundation (Yesod) to Eternity (Netzach). This path represents hope, inspiration, and serenity.",
                18: "Path 18: The Moon - Connects Foundation (Yesod) to Reverberation (Hod). This path represents illusion, intuition, and the unconscious.",
                19: "Path 19: The Sun - Connects Reverberation (Hod) to Kingdom (Malkuth). This path represents joy, success, and vitality.",
                20: "Path 20: Judgement - Connects Foundation (Yesod) to Kingdom (Malkuth). This path represents rebirth, inner calling, and absolution.",
                21: "Path 21: The World - Connects Eternity (Netzach) to Kingdom (Malkuth). This path represents completion, fulfillment, and integration."
            };
            
            // Current active path
            let currentActivePath = -1;
            
            // Add click event listeners to all path buttons
            pathButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const pathNumber = this.getAttribute('data-path');
                    const trumpName = this.getAttribute('data-trump');
                    updateDisplay(pathNumber, trumpName);
                });
            });
            
            // Add click event listeners to navigation buttons
            prevButton.addEventListener('click', function() {
                navigatePath(-1);
            });
            
            nextButton.addEventListener('click', function() {
                navigatePath(1);
            });
            
            // Function to update the display with the selected path information
            function updateDisplay(pathNumber, trumpName) {
                // Update active button
                pathButtons.forEach(button => {
                    button.classList.remove('active');
                    if (button.getAttribute('data-path') === pathNumber) {
                        button.classList.add('active');
                    }
                });
                
                // Update current active path
                currentActivePath = parseInt(pathNumber);
                
                // Update title
                tarotTitle.textContent = `${trumpName} (Path ${pathNumber})`;
                
                // Update image - use clean filename format
                const imageName = trumpName.replace(/\s+/g, '');
                tarotImage.src = `images/${imageName}.jpg`;
                tarotImage.alt = trumpName;
                tarotImage.style.display = 'block';
                
                // Update audio
                meditationAudio.src = `audio/${pathNumber} ${trumpName}.wav`;
                meditationAudio.load();
                
                // Update path description
                pathDescription.textContent = pathDescriptions[pathNumber];
            }
            
            // Function to navigate paths with buttons or keyboard
            function navigatePath(direction) {
                if (currentActivePath === -1) {
                    currentActivePath = 0;
                } else {
                    currentActivePath = (currentActivePath + direction + 22) % 22;
                }
                
                const button = document.querySelector(`.path-button[data-path="${currentActivePath}"]`);
                const trumpName = button.getAttribute('data-trump');
                updateDisplay(currentActivePath.toString(), trumpName);
            }
            
            // Add keyboard navigation for accessibility
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                    navigatePath(1);
                } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                    navigatePath(-1);
                }
            });
            
            // Function to handle image loading errors
            tarotImage.addEventListener('error', function() {
                this.src = createPlaceholder(this.alt || 'Unknown');
                this.alt = 'Image not available';
            });
            
            // Function to handle audio loading errors
            meditationAudio.addEventListener('error', function() {
                pathDescription.textContent += '\n\nMeditation audio not available for this path.';
            });
            
            // Create a placeholder image with the trump name
            function createPlaceholder(trumpName) {
                const canvas = document.createElement('canvas');
                canvas.width = 300;
                canvas.height = 450;
                const ctx = canvas.getContext('2d');
                
                // Fill background
                ctx.fillStyle = '#f8f8f8';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Add border
                ctx.strokeStyle = '#4b0082';
                ctx.lineWidth = 10;
                ctx.strokeRect(5, 5, canvas.width - 10, canvas.height - 10);
                
                // Add text
                ctx.fillStyle = '#4b0082';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(trumpName, canvas.width/2, 50);
                
                ctx.font = '20px Arial';
                ctx.fillText('Image not found', canvas.width/2, canvas.height/2 - 20);
                ctx.fillText('Please check file name', canvas.width/2, canvas.height/2 + 20);
                
                // Add decorative elements
                ctx.beginPath();
                ctx.arc(canvas.width/2, canvas.height/2 + 80, 50, 0, Math.PI * 2);
                ctx.strokeStyle = '#9370db';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Convert to data URL and create image
                return canvas.toDataURL('image/png');
            }
            
            // Set initial placeholder
            const initialPlaceholder = createPlaceholder('The Fool\'s Journey');
            tarotImage.src = initialPlaceholder;
            tarotImage.style.display = 'block';
        });
    </script>
</body>
</html>
